{% extends "base.html" %}

{% block conteudo %}
<h1>Resultado da VotaÃ§Ã£o</h1>

{% if eliminado %}
    <p><strong>{{ eliminado }}</strong> foi eliminado com {{ votos }} voto(s)!</p>
    
    {% if papel == "assassino" %}
        <p style="color: red; font-weight: bold;">ğŸ”ª O eliminado era o ASSASSINO! ğŸ”ª</p>
    {% elif papel == "anjo" %}
        <p style="color: blue; font-weight: bold;">ğŸ˜‡ O eliminado era o ANJO! ğŸ˜‡</p>
    {% else %}
        <p style="color: gray;">ğŸ‘¤ O eliminado era um CIDADÃƒO.</p>
    {% endif %}
{% else %}
    <p>Nenhum jogador foi eliminado nesta rodada.</p>
{% endif %}

<br>

{% if usuario_eliminado %}
    <p style="color: red; font-weight: bold;">ğŸ’€ VocÃª foi eliminado pela votaÃ§Ã£o! ğŸ’€</p>
    <p>Redirecionando em <span id="timer">3</span> segundos...</p>
    
    <script>
        let timeLeft = 3;
        const timerElement = document.getElementById('timer');

        const countdown = setInterval(() => {
            timeLeft--;
            timerElement.textContent = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(countdown);
                window.location.href = "{{ url_for('game_over') }}";
            }
        }, 1000);
    </script>
{% else %}
    <p>Verificando condiÃ§Ãµes de vitÃ³ria...</p>
    <p>Redirecionando em <span id="timer">5</span> segundos...</p>

    <script>
        let timeLeft = 5;
        const timerElement = document.getElementById('timer');

        const countdown = setInterval(() => {
            timeLeft--;
            timerElement.textContent = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(countdown);
                window.location.href = "{{ url_for('verificar_vitoria') }}";
            }
        }, 1000);
    </script>
{% endif %}

{% endblock %}